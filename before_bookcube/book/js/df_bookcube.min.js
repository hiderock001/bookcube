define(["jquery","cookie"],function(e){function o(e,o){var i=b.schema(),r=b.os(),t=b.isApp();switch(e){case"library":t?location.href="http://"+a+o:n("android"==r?"bookcube":i+"ebooklibrary");break;case"preview":t?window.bookcubeApp.preview(o):n("android"==r?"bookcube/preview?book_num="+o:i+"preview?book_num="+o+"&split_num=00");break;case"prelisten":t?window.bookcubeApp.prelistem(o):n("android"==r?"bookcube/prelisten?book_num="+o:i+"prelisten?book_num="+o);break;case"viewer":t?window.bookcubeApp.open_viewer(o):n("android"==r?"bookcube":i);break;case"order":t?location.href=i+"main":n("android"==r?"bookcube/order?"+o:i+"showpurchaselist?"+o);break;case"link":case"mydown":t?location.href=o:n("android"==r?"move?url="+escape(o):"mydown"==e?i+"showpurchaselist":i+"move?url="+o);break;case"down":t?window.bookcubeApp.down_cb(o):n("android"==r?"bookcube/down?cb="+escape(o):i+"takemypage?"+o);break;case"bookshelf":default:t?location.href=i+"b2c":n("android"==r?"bookcube":"bookshelf"==e?i+"AddToMyBookshelf?"+o:i)}}function n(e){if("ios"==b.os())if(confirm("북큐브앱이 설치되어 있습니까?")){var o=e.indexOf("move?url=")>-1?e.indexOf("&")>-1?e+"&comp="+Math.floor((new Date).getTime()/1e3):e+"?comp="+Math.floor((new Date).getTime()/1e3):e;document.location.href=o}else document.location.href=b.store();else{var n=(new Date).getTime();if(d.match(/Chrome/))setTimeout(function(){document.location.href="intent://"+e+"#Intent;scheme=bookcubeshelf;package=com.bookcube.bookplayer;end"},1e3);else{setTimeout(function(){(new Date).getTime()-n<2e3&&(location.href=b.store())},500);var i=document.createElement("iframe");i.style.visibility="hidden",i.src=b.schema()+e,document.body.appendChild(i),document.body.removeChild(i)}}}function i(e){var o=/(^[+-]?\d+)(\d{3})/;for(e+="";o.test(e);)e=e.replace(o,"$1,$2");return e}var r,t,c,a=location.host,d=navigator.userAgent,u=function(){d.indexOf("Mac OS")>0?(d.indexOf("iPad")>0?(t="tablet",c="bookPlayerhd://"):(t="mobile",c="bookPlayer://"),r="ios"):d.indexOf("Android")>0?(r="android",c="bookcubeshelf://",t=d.indexOf("SHV-E150S")>0||d.indexOf("LG-LU8300")>0||d.indexOf("SHW-M380S")>0||d.indexOf("SHW-M480")>0||d.indexOf("GT-N5100")>0||d.indexOf("GT-5110")>0||d.indexOf("SHW-M380")>0||d.indexOf("SHV-E140")>0||d.indexOf("SHV-E150S")>0||d.indexOf("GT-P8110")>0||d.indexOf("GT-N8013")>0?"tablet":"mobile"):(r="pc",t="pc",c="")},b={isLogin:function(){return e.cookie("user_num")?!0:!1},isMobile:function(){return"pc"==t?!1:!0},os:function(){return r},store:function(){return"ios"==r?"mobile"==t?"https://itunes.apple.com/kr/app/id576288015":"https://itunes.apple.com/kr/app/id590058402":"android"==r?"market://details?id=com.bookcube.bookplayer":""},schema:function(){return c},isApp:function(){return"android"==r&&window.bookcubeApp?(e.cookie("app","bcApp",{path:"/"}),!0):!1},host:function(){return a},appVersion:function(){var e=0;try{e=parseInt(window.bookcubeApp.getVersionInt())}catch(o){varsion=0}return e},openApp:function(e,n){o(e,n)},commify:function(e){return i(e)}};return u(),b});